{"version":3,"sources":["Component/ImageGalleryItem/ImageGalleryItem.module.css","Component/Button/Button.module.css","Component/Modal/Modal.module.css","Component/ImageGallery/ImageGallery.module.css","Component/Searchbar/Searchbar.module.css","Component/Searchbar/Searchbar.js","Component/Spinner/Spinner.js","Component/ImageGalleryItem/ImageGalleryItem.js","Component/ImageGallery/ImageGallery.js","Servise/imagesApi.js","Component/Button/Button.js","Component/Modal/Modal.js","Component/helper/mapper.js","App.js","index.js"],"names":["module","exports","Searchbar","state","searchinput","handelNameImg","e","value","currentTarget","setState","toLowerCase","handelSubmit","preventDefault","trim","toast","error","props","onSubmit","this","className","s","SearchForm","type","SearchFormButton","style","width","height","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","Spinner","color","ImageGalleryItem","imgSrc","imgUrl","onModalOpen","onClick","src","alt","ImageGalleryItemImage","ImageGallery","result","map","id","webformatURL","largeImageURL","imagesApi","imagesName","numPage","params","fetch","then","response","ok","json","Promise","reject","Error","Button","onLoadMore","Center","Modal","largImageURL","useEffect","window","addEventListener","closeModal","code","Overlay","mapper","images","App","useState","setSearchinput","setError","status","setStatus","page","setPage","setResult","setLargImageURL","imgFatchApi","fetchAPI","total","MapperApi","hits","handleSroll","catch","finally","scrollTo","top","document","documentElement","scrollHeight","behavior","length","url","autoClose","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e109b8ea.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1Jz86\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage___-s8y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2WKLr\",\"Center\":\"Button_Center__2gw-j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2sXuW\",\"Modal\":\"Modal_Modal__31gvd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1M3kO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2NGdY\",\"SearchForm\":\"Searchbar_SearchForm__1VboS\",\"SearchFormButton\":\"Searchbar_SearchFormButton__lzsv9\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1Y8ku\",\"SearchFormInput\":\"Searchbar_SearchFormInput__10i9d\"};","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport { ImSearch } from 'react-icons/im'\r\nimport s from './Searchbar.module.css'\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  }\r\n\r\n  state = {\r\n    searchinput: '',\r\n  }\r\n\r\n  /* ---------------------------- Отслеживает запрос в инпуте --------------------------- */\r\n  handelNameImg = (e) => {\r\n    const { value } = e.currentTarget\r\n    this.setState({ searchinput: value.toLowerCase() })\r\n  }\r\n\r\n  /* ----------------------------- запрос в сабмит и запись в state---------------------------- */\r\n  handelSubmit = (e) => {\r\n    e.preventDefault()\r\n    const { searchinput } = this.state\r\n\r\n    /* ---------------- если инпут пустой выпадет предупреждение ---------------- */\r\n    if (searchinput.trim() === '') {\r\n      return toast.error('Введите запрос')\r\n    }\r\n    this.props.onSubmit(searchinput)\r\n    /* ------------------- очистка инпута посне нажатия кнопки ------------------ */\r\n    this.setState({ searchinput: '' })\r\n  }\r\n\r\n  render() {\r\n    const { searchinput } = this.state\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handelSubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <ImSearch style={{ width: 20, height: 20 }} />\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={searchinput}\r\n            onChange={this.handelNameImg}\r\n          />\r\n        </form>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Searchbar\r\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\r\nimport Loader from 'react-loader-spinner'\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div>\r\n      <Loader type=\"TailSpin\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  )\r\n}\r\nexport default Spinner\r\n","import PropTypes from 'prop-types'\r\nimport s from './ImageGalleryItem.module.css'\r\n\r\n/* ------------------------ пропсы приходят через ImageGallery------------------------ */\r\n\r\nfunction ImageGalleryItem({ imgSrc, imgUrl, onModalOpen }) {\r\n  return (\r\n    <li\r\n      className={s.ImageGalleryItem}\r\n      onClick={() => {\r\n        onModalOpen(imgUrl)\r\n      }}\r\n    >\r\n      <img src={imgSrc} alt=\"\" className={s.ImageGalleryItemImage} />\r\n    </li>\r\n  )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  imgSrc: PropTypes.string.isRequired,\r\n  imgUrl: PropTypes.string.isRequired,\r\n  onModalOpen: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default ImageGalleryItem\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport s from './ImageGallery.module.css'\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem'\r\n\r\n/* --------------------------- result приходит из handelSearchSubmitForm--------------------------- */\r\nfunction ImageGallery({ onModalOpen, result }) {\r\n  // console.log(result)\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {/* достаём из массива result нужные элементы и передаём в item  */}\r\n      {result.map(({ id, webformatURL, largeImageURL }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          imgUrl={largeImageURL}\r\n          imgSrc={webformatURL}\r\n          onModalOpen={onModalOpen}\r\n        />\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  onModalOpen: PropTypes.func.isRequired,\r\n  result: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n}\r\n\r\nexport default ImageGallery\r\n","/* -------------- Аргументы принимают значения которые приходят из компонента App через вызванную функцию fetchAPI------------- */\r\n\r\nfunction imagesApi(imagesName, numPage) {\r\n  // console.log(imagesName)\r\n  // console.log(numPage)\r\n  const API_KEY = '23996907-65b7baf3ba7389d44636c5d9e'\r\n  const BASE_URL = `https://pixabay.com/api/`\r\n  const params = `?q=${imagesName}&page=${numPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\r\n\r\n  const URL = BASE_URL + params\r\n\r\n  return fetch(URL).then((response) => {\r\n    if (response.ok) {\r\n      return response.json()\r\n    }\r\n    return Promise.reject(new Error(`Такого названия ${imagesName} нет`))\r\n  })\r\n}\r\n\r\nexport default imagesApi\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport s from './Button.module.css'\r\n\r\n/* -------------------------- пропс onLoadMore приходит из App ------------------------- */\r\nconst Button = ({ onLoadMore }) => {\r\n  return (\r\n    <div className={s.Center}>\r\n      <button className={s.Button} type=\"button\" onClick={onLoadMore}>\r\n        Загрузить ещё\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default Button\r\n","import { useEffect } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\nimport s from './Modal.module.css'\r\n\r\nexport default function Modal({ onClick, largImageURL }) {\r\n  /* ------------------------- методы жизненного цикла в которые записаны слушатели событий ------------------------ */\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', closeModal)\r\n  }, [])\r\n\r\n  /* ------------- функция закрытия модалки по нажатию на Escape переданная через пропс ------------ */\r\n  const closeModal = (e) => {\r\n    if (e.code === 'Escape') {\r\n      onClick()\r\n    }\r\n  }\r\n  return (\r\n    <div className={s.Overlay} onClick={onClick}>\r\n      <div className={s.Modal}>\r\n        <img src={largImageURL} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nModal.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n  largImageURL: PropTypes.string.isRequired,\r\n}\r\n","/* --------------------------------- Маппер является вспомогательной функцией которая обрабатывает то что приходит из response.json() --------------------------------- */\r\n\r\nconst mapper = (images) => {\r\n  // console.log(images)\r\n  return images.map(({ id, webformatURL, largeImageURL }) => ({\r\n    id,\r\n    webformatURL,\r\n    largeImageURL,\r\n  }))\r\n}\r\n\r\nexport default mapper\r\n","import { useState, useEffect } from 'react'\r\nimport { ToastContainer } from 'react-toastify'\r\nimport Searchbar from './Component/Searchbar/Searchbar'\r\nimport Spinner from './Component/Spinner/Spinner'\r\nimport ImageGallery from './Component/ImageGallery/ImageGallery'\r\nimport fetchAPI from '../src/Servise/imagesApi'\r\nimport Button from './Component/Button/Button'\r\nimport Modal from './Component/Modal/Modal'\r\nimport MapperApi from './Component/helper/mapper'\r\n\r\nexport default function App() {\r\n  const [searchinput, setSearchinput] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [status, setStatus] = useState('idle')\r\n  const [page, setPage] = useState(1)\r\n  const [result, setResult] = useState([])\r\n  const [largImageURL, setLargImageURL] = useState('')\r\n\r\n  /* -------------------- Сравнение запроса при  обновлении ------------------- */\r\n  useEffect(() => {\r\n    if (!searchinput || !page) {\r\n      return\r\n    }\r\n    imgFatchApi()\r\n  }, [searchinput, page])\r\n\r\n  /* -------------------------- функция фетч запроса -------------------------- */\r\n  const imgFatchApi = () => {\r\n    setStatus('panding')\r\n    /* ------------------- передаём в функцию два аргумента которые будут передавать значения imagesApi ------------------ */\r\n    fetchAPI(searchinput, page)\r\n      /* ---------------- В аргумент then вписываем произволное имя в это имя передаётся response.json() --------------- */\r\n      .then((images) => {\r\n        if (images.total === 0) {\r\n          setError(`Нет картинок по запросу ${searchinput}`)\r\n          setStatus('rejected')\r\n        } else {\r\n          setResult((result) => [...result, ...MapperApi(images.hits)])\r\n\r\n          /* ---------------- проскроливает после нажатия загрузить ещё --------------- */\r\n          handleSroll()\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setError(error)\r\n        setStatus('rejected')\r\n      })\r\n      .finally(() => {\r\n        setStatus('rejected')\r\n      })\r\n  }\r\n\r\n  /* ------------------------ Функция прокрутки ------------------------ */\r\n  const handleSroll = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    })\r\n  }\r\n  /* ------------------------ Функция открытия модалки ------------------------ */\r\n  // передаём в функцию аргумент url в который будет записан пропс в компоненте модалки\r\n  const handelOpenModal = (url) => {\r\n    setLargImageURL(url)\r\n  }\r\n\r\n  /* ------------------------ функция закрытия модалки ------------------------ */\r\n  const handelCloseModal = () => {\r\n    setLargImageURL('')\r\n  }\r\n\r\n  /* ------------------------- функция запроса в форме ------------------------- */\r\n  const handelSearchSubmitForm = (imagesName) => {\r\n    /* -------------- очищает поля стейта перед следующим запросом -------------- */\r\n    return setSearchinput(imagesName), setResult([]), setPage(1)\r\n  }\r\n\r\n  /* ---------------------- Функция кнопки загрузить ещё ---------------------- */\r\n  const handelLoadMore = () => {\r\n    /* ----------------- добавляет новую страницу к существующей ---------------- */\r\n    setPage(page + 1)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Searchbar onSubmit={handelSearchSubmitForm} />\r\n\r\n      {status === 'panding' && <Spinner />}\r\n\r\n      {result.length > 0 && (\r\n        <>\r\n          <ImageGallery onModalOpen={handelOpenModal} result={result} />\r\n          <Button onLoadMore={handelLoadMore} />\r\n        </>\r\n      )}\r\n\r\n      {largImageURL && (\r\n        <Modal largImageURL={largImageURL} onClick={handelCloseModal} />\r\n      )}\r\n\r\n      {error && <p>{error}</p>}\r\n\r\n      <ToastContainer autoClose={3000} position=\"top-center\" />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}