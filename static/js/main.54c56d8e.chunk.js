(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1Jz86",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage___-s8y"}},11:function(e,t,a){e.exports={Button:"Button_Button__2WKLr",Center:"Button_Center__2gw-j"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2sXuW",Modal:"Modal_Modal__31gvd"}},15:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1M3kO"}},21:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2NGdY",SearchForm:"Searchbar_SearchForm__1VboS",SearchFormButton:"Searchbar_SearchFormButton__lzsv9",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1Y8ku",SearchFormInput:"Searchbar_SearchFormInput__10i9d"}},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(21),a(13)),l=a(3),s=a(8),u=(a(22),a(16)),m=a(4),j=a.n(m),b=a(1);var d=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],o=r[1];return Object(b.jsx)("header",{className:j.a.Searchbar,children:Object(b.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return s.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441");t(c),o("")},children:[Object(b.jsxs)("button",{type:"submit",className:j.a.SearchFormButton,children:[Object(b.jsx)(u.a,{style:{width:20,height:20}}),Object(b.jsx)("span",{className:j.a.SearchFormButtonLabel,children:"Search"})]}),Object(b.jsx)("input",{className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){var t=e.currentTarget.value;o(t.toLowerCase())}})]})})},h=(a(24),a(14)),O=a.n(h),f=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(O.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80})})},g=a(15),p=a.n(g),_=a(10),S=a.n(_);var x=function(e){var t=e.imgSrc,a=e.imgUrl,n=e.onModalOpen;return Object(b.jsx)("li",{className:S.a.ImageGalleryItem,onClick:function(){n(a)},children:Object(b.jsx)("img",{src:t,alt:"",className:S.a.ImageGalleryItemImage})})};var v=function(e){var t=e.onModalOpen,a=e.result;return Object(b.jsx)("ul",{className:p.a.ImageGallery,children:a.map((function(e){var a=e.id,n=e.webformatURL,r=e.largeImageURL;return Object(b.jsx)(x,{imgUrl:r,imgSrc:n,onModalOpen:t},a)}))})};var I=function(e,t){var a="?q=".concat(e,"&page=").concat(t,"&key=").concat("23996907-65b7baf3ba7389d44636c5d9e","&image_type=photo&orientation=horizontal&per_page=12");return fetch("https://pixabay.com/api/"+a).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f ".concat(e," \u043d\u0435\u0442")))}))},y=a(11),w=a.n(y),F=function(e){var t=e.onLoadMore;return Object(b.jsx)("div",{className:w.a.Center,children:Object(b.jsx)("button",{className:w.a.Button,type:"button",onClick:t,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451"})})},L=a(12),k=a.n(L);function B(e){var t=e.onClick,a=e.largImageURL;Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.addEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&t()};return Object(b.jsx)("div",{className:k.a.Overlay,onClick:t,children:Object(b.jsx)("div",{className:k.a.Modal,children:Object(b.jsx)("img",{src:a,alt:""})})})}var G=function(e){return e.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}}))};function M(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(l.a)(c,2),u=o[0],m=o[1],j=Object(n.useState)("idle"),h=Object(l.a)(j,2),O=h[0],g=h[1],p=Object(n.useState)(1),_=Object(l.a)(p,2),S=_[0],x=_[1],y=Object(n.useState)([]),w=Object(l.a)(y,2),L=w[0],k=w[1],M=Object(n.useState)(""),N=Object(l.a)(M,2),C=N[0],U=N[1];Object(n.useEffect)((function(){a&&S&&E()}),[a,S]);var E=function(){g("pending"),I(a,S).then((function(e){0===e.total?(m("\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(a)),g("rejected")):(k((function(t){return[].concat(Object(i.a)(t),Object(i.a)(G(e.hits)))})),R())})).catch((function(e){m(e),g("rejected")})).finally((function(){g("rejected")}))},R=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return Object(b.jsxs)("div",{children:[Object(b.jsx)(d,{onSubmit:function(e){return r(e),k([]),x(1)}}),L.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{onModalOpen:function(e){U(e)},result:L}),Object(b.jsx)(F,{onLoadMore:function(){x(S+1)}})]}),"pending"===O&&Object(b.jsx)(f,{}),C&&Object(b.jsx)(B,{largImageURL:C,onClick:function(){U("")}}),u&&Object(b.jsx)("p",{children:u}),Object(b.jsx)(s.a,{autoClose:3e3,position:"top-center"})]})}o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.54c56d8e.chunk.js.map